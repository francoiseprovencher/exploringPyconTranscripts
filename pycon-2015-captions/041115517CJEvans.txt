                041115517CJEVANS
09:48:30AM      [MUSIC PLAYING]
09:50:10AM      >> HELLO, EVERYONE.
09:50:11AM      SO OUR SPEAKER TODAY IS JULIA EVANS, AND HER TALK
09:50:15AM      IS TITLED SPYING ON YOUR PROGRAMS.
09:50:18AM      PLEASE GIVE HER A WARM WELCOME.
09:50:20AM      [APPLAUSE]
09:50:23AM      >> HEY, EVERYONE.
09:50:27AM      SO I'M JULIA, AND I'M GOING TO TALK ABOUT ONE OF MY
09:50:32AM      FAVORITE THINGS I'M BEEN LEARNING FOR THE LAST YEAR
09:50:34AM      AND A HALF WHICH IS HOW TO BECOME A BETTER SPY.
09:50:38AM      SO I'M NOT GOING TO TAKE QUESTIONS AT THE END OF
09:50:39AM      THE TALK.
09:50:40AM      IF YOU HAVE QUESTIONS, TWEET THEM TO ME.
09:50:42AM      IF I HAVE TIME I'LL TRY TO ANSWER THEM.
09:50:44AM      BUT WE'RE NOT GOING TO DO QUESTIONS AT THE
09:50:46AM      MICROPHONE.
09:50:47AM      SO, LET'S GET GOING!
09:50:50AM      FIRST OFF, THIS TALK IS NOT REALLY ABOUT PYTHON.
09:50:55AM      IT'S ABOUT LOTS OF STUFF.
09:50:57AM      IT'S ABOUT TOOLS THAT YOU CAN USE TO DEBUG
09:51:00AM      PROGRAMS, NO MATTER WHAT PROGRAMMING LANGUAGE
09:51:02AM      THEY'RE WRITTEN IN WHICH I HEARD IS A THING ONLY
09:51:05AM      RECENTLY AND KIND OF A HUGE SURPRISE TO ME.
09:51:08AM      MOST OF THE THINGS I'M GOING TO DISCUSS IN THIS
09:51:11AM      TALK ARE GOING TO BE LINUX-SPECIFIC.
09:51:14AM      WE'RE GOING TO GET FAST TO LINUX DETAILS, WHICH I
09:51:18AM      PROMISE YOU'RE GOING TO UNDERSTAND BECAUSE YOU'RE
09:51:20AM      ALL REALLY SMART AND I'LL GOING TO EXPLAIN IT.
09:51:22AM      SO DON'T WORRY.
09:51:25AM      BUT THIS IS A LINUX-SPECIFIC TALK.
09:51:27AM      AND YOU'RE GOING TO UNDERSTAND WHY.
09:51:29AM      PRETTY SOON.
09:51:32AM      THE ATTITUDE I WANT TO KIND OF CONVINCE YOU OF IN
09:51:35AM      THIS TALK IS THAT YOU SHOULD START THINKING ABOUT
09:51:37AM      YOUR PROGRAMS AS BLACK BOXES.
09:51:39AM      AS IF THEY'RE WRITTEN BY PEOPLE WHO ARE MALICIOUS.
09:51:44AM      SO THIS TALK IS REALLY ABOUT THE PROBLEM OF LIKE
09:51:48AM      HOW DO YOU OBSERVE WHAT A PROGRAM IS DOING WHILE
09:51:50AM      IT'S RUNNING, RIGHT?
09:51:51AM      YOU'VE WRITTEN A PROGRAM, IT'S DOING SOMETHING, AND
09:51:54AM      HOW DO YOU KNOW WHAT THAT IS, RIGHT?
09:51:58AM      [NO AUDIO]
09:52:02AM      LOOK AT THE SOURCE CODE, WHO LOOKS AT THE SOURCE
09:52:05AM      CODE?
09:52:08AM      [NO AUDIO]
09:52:11AM      BY THE CODE, YOU MIGHT THINK THAT TO DEBUG A
09:52:13AM      PROGRAM, YOU NEED TO KNOW THE PROGRAMMING LANGUAGE
09:52:15AM      THAT ITS WRITTEN IN.
09:52:18AM      NONE OF THESE THINGS ARE TRUE.
09:52:20AM      AND THE TOOLS I'M GOING TO EXPLAIN DON'T INVOLVE
09:52:22AM      READING THE PROGRAM, CARING ABOUT THE PROGRAM
09:52:25AM      LANGUAGE THAT ITS WRITTEN IN.
09:52:27AM      AND WE WANT TO TALK ABOUT HOW TO BE A WIZARD,
09:52:29AM      RIGHT?
09:52:29AM      HOW TO DEBUG WITHOUT DOING ANY OF THIS STUFF.
09:52:34AM      THIS IS SOMETHING WHICH IS ALREADY FAMILIAR TO YOU,
09:52:36AM      RIGHT?
09:52:37AM      LIKE I'M SAYING THIS IS WIZARDRY.
09:52:43AM      IF YOU LOOK AT A TOOL WHICH TELLS YOU HOW MUCH CPU
09:52:47AM      PROGRAMS YOURS ARE USING.
09:52:50AM      TOP DOESN'T CARE WHAT LANGUAGE CHROME IS WRITTEN
09:52:52AM      IN, RIGHT?
09:52:53AM      IT'S USING THE SWITCH MEMORY, USING THIS MUCH CPU,
09:52:57AM      AND THAT'S IT.
09:52:57AM      AND WE'RE GOING TO TALK ABOUT LIKE, MORE LIKE
09:53:00AM      ADVANCED WAYS TO DO THAT.
09:53:01AM      AND I'LL EXPLAIN WHAT I MEAN BY THAT.
09:53:04AM      AS WE GO THROUGH THIS.
09:53:06AM      SO, HERE'S HOW IT'S GOING TO GO.
09:53:11AM      WE'RE GOING TO START OFF BY TALKING ABOUT OPERATING
09:53:17AM      SYSTEMS A LITTLE BIT.
09:53:19AM      AND WHAT'S AN OPERATING SYSTEM, HOW DOES IT WORK
09:53:23AM      AND WHAT DO WE NEED TO KNOW TO BECOME WIZARDS.
09:53:27AM      AND WE'RE GOING TO TALK THROUGH THREE MYSTERIES.
09:53:32AM      CASE OF -- WEBSITE AND THE CASE OF THE SLOW
09:53:35AM      PROGRAM.
09:53:36AM      AND THEY'RE ALL GOING TO BE REALLY FUN.
09:53:38AM      AND WE'RE GOING TO LEARN A FEW THINGS ABOUT SPYING.
09:53:42AM      AND HOW TO BECOME A SPY.
09:53:46AM      SO I WANT TO TALK A LITTLE BIT ABOUT WHY YOU SHOULD
09:53:51AM      LOVE YOUR OPERATING SYSTEM.
09:53:54AM      WHEN I STARTED LEARNING ABOUT THIS, I HAD BEEN
09:53:58AM      USING LINUX FOR A LONG TIME, FOR MAYBE NINE YEARS
09:54:01AM      AND ATOM POINT -- AT SOME POINT I WAS LIKE WHAT DID
09:54:04AM      THE LINUX ACTUALLY DO.
09:54:06AM      I REALIZED I WAS CONFUSED ABOUT SOME FUNDAMENTAL
09:54:09AM      POINTS ABOUT WHAT AN OPERATING SYSTEM DID.
09:54:12AM      I'M GOING TO EXPLAIN EVEN THOUGH YOU PROBABLY KNOW
09:54:15AM      MORE OR LESS THE STUFF ALREADY.
09:54:16AM      SO LET'S SAY THAT YOU GO TO GOOGLE.COM, RIGHT?
09:54:21AM      SO THE THINGS THAT HAPPEN ARE, LIKE, THIS IS AN
09:54:24AM      ENGINEER QUESTION I'VE GOTTEN BEFORE.
09:54:26AM      WHAT HAPPENS WHEN YOU GO TO GOOGLE.COM?
09:54:29AM      FIRST YOU PRESS "H" OR "G" ON YOUR KEYBOARD, AND
09:54:34AM      WHEN YOU PRESS G, IT'S LIKE I KNOW HOW TO HANDLE
09:54:40AM      THIS.
09:54:40AM      HOW TO HANDLE YOUR KEYBOARD DRIVER, RIGHT?
09:54:42AM      ALSO, WHEN IT STARTS TO GET GOOGLE.COM, IT SENDS
09:54:48AM      ALL THE NETWORK PACKETS, RIGHT?
09:54:50AM      YOUR WHOLE NETWORK IS INSIDE -- IS INSIDE YOUR
09:54:54AM      OPERATING SYSTEM AND YOUR OPERATING SYSTEM KNOWS
09:54:58AM      HOW TO DO THAT.
09:54:59AM      WHEN YOU WRITE NETWORK CODE YOU DON'T HAVE TO
09:55:02AM      IMPLEMENT NETWORK PROTOCOL CODES EVERY TIME.
09:55:07AM      IT'S REALLY HARD AND I TRIED.
09:55:09AM      IF YOU WANT TO WRITE FILES TO DISK, YOUR OPERATING
09:55:12AM      SYSTEM NEEDS TO KNOW ABOUT, FOR EXAMPLE, HOW, LIKE,
09:55:16AM      YOUR HARD DRIVE WORKS AND HOW TO COMMUNICATE BYTES
09:55:19AM      TO YOUR HARD DRIVE.
09:55:20AM      LIKE, I NEED YOU TO WRITE THESE BYTES TO THIS PART
09:55:23AM      OF THE DRIVE.
09:55:23AM      AND ALSO NEEDS TO KNOW, LIKE, GIVEN A BUNCH OF
09:55:26AM      BYTES ON YOUR HARD DRIVE, HOW ARE THOSE ORGANIZED
09:55:29AM      INTO FILES, RIGHT?
09:55:30AM      AND THIS IS ALL THIS STUFF YOU NEVER HAVE TO WORRY
09:55:32AM      ABOUT AS A PROGRAMMER.
09:55:33AM      AND THE REASON YOU DON'T HAVE TO WORRY ABOUT IT IS
09:55:36AM      BECAUSE YOUR OPERATING SYSTEM KNOWS HOW TO DO IT
09:55:38AM      AND ALLOCATES MEMORY.
09:55:39AM      IT WILL LIKE COMMUNICATE WITH THE GRAPHICS CARD.
09:55:41AM      IF LIKE CHROME RUNS OUT OF MEMORY, IT WILL BE LIKE
09:55:45AM      YO CHROME, AND START SWAPPING TO DISK.
09:55:48AM      IF REALLY RUNS OUT OF MEMORY, IT WILL KILL IT, SO
09:55:50AM      IT DOES ALL KINDS OF AMAZING STUFF FOR YOU.
09:55:53AM      AND THIS IS GOING TO BE REALLY IMPORTANT TO KNOW IN
09:55:56AM      A MINUTE.
09:55:58AM      THAT THE OPERATING SYSTEM DOES ALL THIS.
09:55:59AM      SO HOW DO YOU CALL OPERATING SYSTEM CODE?
09:56:02AM      RIGHT?
09:56:02AM      THIS IS SOMETHING I DIDN'T UNDERSTAND UNTIL LIKE
09:56:05AM      LAST YEAR.
09:56:05AM      SO THIS IS, LIKE, IF YOU WRITE SOMETHING TO DISK,
09:56:10AM      WE'VE ESTABLISHED THAT THE OPERATING SYSTEM WRITES
09:56:12AM      STUFF TO DISK.
09:56:13AM      BUT LIKE HOW DOES IT DO THAT?
09:56:15AM      AND THE ANSWER IS SYSTEM CALLS, IS THE BEST AND MY
09:56:20AM      FAVORITE, AND WE'RE GOING TO GET THERE.
09:56:23AM      SO SYSTEMS CALLS ARE THE WAY YOU COMMUNICATE WITH
09:56:25AM      YOUR OPERATING SYSTEM.
09:56:26AM      YOU'RE LIKE, YO, I NEED YOU TO WRITE THIS FILE.
09:56:28AM      LIKE, PLEASE HELP.
09:56:29AM      AND IT'S LIKE, OKAY, I GOT IT.
09:56:31AM      DON'T WORRY.
09:56:33AM      AND, LIKE, BASICALLY ALMOST ALL OF THE
09:56:36AM      COMMUNICATION WITH YOUR HARDWARE THAT YOU DO,
09:56:38AM      HAPPENS THROUGH SYSTEM CALLS.
09:56:40AM      AND DOESN'T MATTER WRITING PYTHON, WRITING C,
09:56:44AM      WRITING INTERCAL.
09:56:46AM      NO MATTER WHAT, YOU'RE WRITING TO A FILE YOU WRITE
09:56:49AM      SYSTEM CALLS.
09:56:50AM      YOU DON'T HAVE A CHOICE.
09:56:52AM      SO THESE ARE -- THIS IS LIKE THE INTERFACE TO YOUR
09:56:55AM      OPERATING SYSTEM.
09:56:55AM      USE IT TO OPEN FILES, YOU START PROGRAMS.
09:56:57AM      YOU CHANGE FILE PERMISSIONS.
09:57:01AM      SO WE'VE LEARNED -- WE'RE NOW LIKE OPERATING SYSTEM
09:57:04AM      EXPERTS.
09:57:05AM      YOU NO LONGER NEED TO TAKE AN OS CLASS.
09:57:08AM      WE KNOW IT DOES STUFF AND YOUR PROGRAMS TELL IT
09:57:10AM      WHAT TO DO USING SYSTEM CALLS.
09:57:12AM      YOU'RE DONE.
09:57:13AM      SO HOW CAN WE USE THIS KNOWLEDGE TO DEBUG OUR
09:57:17AM      PROGRAMS, RIGHT?
09:57:19AM      AND THE --
09:57:24AM      [NO AUDIO]
09:57:26AM      BECAUSE WE DON'T TRUST OUR PROGRAMS.
09:57:29AM      THEY'RE WRITTEN BY OURSELVES AND THE PAST IT'S BEEN
09:57:32AM      WRONG.
09:57:34AM      SO LET'S DO THIS.
09:57:36AM      WHO'S EVER WRITTEN -- RUN A PROGRAM AND NOT KNOWN
09:57:41AM      WHERE THE CONFIGURATION FILE WAS?
09:57:43AM      OH MY GOD, THAT'S LIKE ALL OF YOU.
09:57:46AM      AMAZING.
09:57:48AM      YEAH.
09:57:48AM      SO THIS HAPPENS ALL THE TIME.
09:57:50AM      AND I REALLY HATE READING DOCUMENTATION TRYING TO
09:57:53AM      FIGURE OUT WHERE THE CONFIG FILE IS, ONE PERSON
09:57:56AM      WILL SAY ONE THING AND SOMEONE ELSE WILL SAY
09:57:58AM      SOMETHING ELSE.
09:57:59AM      NO, I JUST WANT TO KNOW.
09:58:00AM      PLEASE JUST TELL ME, I WANT TO KNOW THE ANSWER, I
09:58:03AM      DON'T WANT TO HAVE TO READ STUFF.
09:58:04AM      SO HERE'S A SPECIFIC EXAMPLE OF THIS.
09:58:06AM      IS, THIS QUESTION IS LIKE BASH_PROFILE, OR BASHRC
09:58:12AM      WHEN IT STARTS.
09:58:13AM      AND I KIND OF KNOW THE ANSWER TO THIS.
09:58:19AM      BUT IF YOU WANTED TO CHECK IT, THERE'S A REALLY,
09:58:22AM      REALLY SIMPLE WAY TO CHECK IT.
09:58:23AM      AND THIS IS BY BEING A WIZARD.
09:58:26AM      AKA USE A TOOL CALLED STRACE.
09:58:28AM      IT'S BASICALLY MY FAVORITE THING IN THE WORLD AND
09:58:32AM      I'M GOING TO TELL YOU ABOUT IT.
09:58:33AM      WE'RE GOING TO GET THERE.
09:58:34AM      SO STRACE LETS YOU BE A WIZARD.
09:58:37AM      AND THE WAY, IT TRACES SYSTEMS CALLS FOR YOU.
09:58:41AM      SO YOU RUN STRACE ON A PROGRAM AND TELLS YOU EVERY
09:58:44AM      SYSTEM CALL THAT IT RUNS.
09:58:45AM      SO IF IT OPENS A FILE, IT'S LIKE, HEY, LETTING YOU
09:58:48AM      KNOW A PROGRAM OPENED THAT FILE.
09:58:50AM      SO YOU CAN USE THIS, TO FIND OUT WHAT YOUR PROGRAMS
09:58:53AM      ARE DOING WHILE THEY'RE RUNNING.
09:58:55AM      LIKE IN AN AUTHORITATIVE WAY.
09:58:58AM      SO THE WAY STRACE IS YOU'RE ON STRACE AND THEN YOU
09:59:03AM      RUN THE PROGRAM THAT YOU WANT TO RUN.
09:59:05AM      WHAT HAPPENS WHEN YOU STRACE?
09:59:09AM      IS YOU GET SOMETHING THAT LOOKS LIKE THIS, WHICH IS
09:59:12AM      OBVIOUSLY, NOT TOTALLY UNDERSTANDABLE.
09:59:16AM      BUT I JUST WANTED TO SHOW IT TO YOU TO LET YOU KNOW
09:59:18AM      IT'S NOT LIKE -- TO NOT WORRY IF YOU SEE SOMETHING
09:59:22AM      LIKE THIS.
09:59:22AM      YOU'RE LIKE, WHAT'S GOING ON?
09:59:24AM      IF YOU LOOK AT THIS AND LOOK ON THE BACK SEE LIB --
09:59:29AM      OKAY, WHATEVER.
09:59:30AM      GOOGLE CHROME IS LOADING SOMETHING LIKE AUDIO
09:59:32AM      LIBRARIES, RIGHT?
09:59:34AM      THAT'S ALL I'M LEARNING FROM THIS.
09:59:37AM      SO WE WANT TO ANSWER THIS QUESTION, DOES BASH USE
09:59:43AM      BASH_PROFILE OR BASHRC?
09:59:45AM      SO WHAT I DID, WAS I S TRACED BASH.
09:59:51AM      HEY, SHOW ME THE OPEN SYSTEM CALLS.
09:59:53AM      SO I LOOKED FOR ALL OF THEM AND IT WAS LIKE, YEAH,
09:59:55AM      IT OPENED BASHRC AND BASH HISTORY.
09:59:59AM      AND THOSE WERE THE ONLY THINGS IN MY HOME DIRECTORY
10:00:01AM      THAT IT OPENED.
10:00:03AM      NOW I KNOW.
10:00:04AM      I DON'T NEED TO READ STACK OVERFLOW.
10:00:07AM      I DON'T NEED TO ASK A FRIEND.
10:00:09AM      IT OPENS BASHRC AND THAT'S IT.
10:00:11AM      WHEN YOU RUN BASH LOG IN --
10:00:15AM      THAT'S WHAT I DID IN THAT CASE.
10:00:18AM      SO BASHRC 1, THERE ARE A LOT OF OTHER SYSTEM CALLS
10:00:22AM      THAT I LOVE TO LOOK AT.
10:00:24AM      THERE'S RIGHT -- IF YOU'RE PROGRAM IS WRITING TO A
10:00:27AM      FILE AND YOU DON'T KNOW, THAT HAPPENS TO ME ALL THE
10:00:29AM      TIME, IT IF YOU HAVE SOME KIND OF WRAPPER SCRIPT
10:00:32AM      THAT'S RUNNING PROGRAMS, YOU CAN STRACE THE SYSTEM
10:00:36AM      CALL AND TELL YOU WHAT PROGRAM IS RUNNING AND WHAT
10:00:38AM      ALL THE COMMAND FLAGS ARE, WHICH IS THE GREATEST.
10:00:40AM      YOU CAN SPY ON NETWORK DATA BY USING LIKE RECEIVE
10:00:43AM      FROM.
10:00:44AM      YOU CAN SEE LIKE WHAT SOFTWARE CONNECTIONS IT'S
10:00:46AM      MAKING.
10:00:47AM      CONNECTING TO OTHER SERVICES.
10:00:56AM      THIS TALK, I HAVE THEM IN A BOX HERE, YOU SHOULD
10:00:58AM      COME GET IT FROM ME.
10:01:01AM      BECAUSE I REALLY LIKE STRACE A LOT.
10:01:03AM      AND SO I'M NOT GOING TO GO TOO MUCH FURTHER INTO
10:01:06AM      STRACE RIGHT NOW.
10:01:07AM      BECAUSE YOU CAN GET --
10:01:11AM      [NO AUDIO]
10:01:15AM      SO THE NEXT TOPIC I WANT TO COVER IS THE CASE OF
10:01:18AM      THE FRENCH WEBSITE.
10:01:21AM      SO THIS IS SOMETHING I MANUFACTURED.
10:01:23AM      I MADE A WEBSITE WHERE YOU GO TO IT, AND -- IN
10:01:27AM      CHROME.
10:01:27AM      I WENT TO IT IN CHROME.
10:01:29AM      IT'S LIKE, HEY, WELCOME TO PYTHON.
10:01:31AM      WOW.
10:01:33AM      AND THEN I TRIED TO GET IT FROM THE COMMAND LINE
10:01:36AM      AND IT WAS LIKE, "BONJUR."
10:01:41AM      AND WHY IS IT IN FRENCH, RIGHT?
10:01:45AM      WHAT HAPPENED, IT'S THE SAME WEBSITE, BUT IT'S
10:01:48AM      GIVING IT TO ME IN TWO DIFFERENT LANGUAGES.
10:01:53AM      [NO AUDIO]
10:01:57AM      WHEN SOMETHING NETWORK -- WHEN A NETWORK THING IS
10:02:00AM      HAPPENING, WHAT YOU CAN DO IS...
10:02:04AM      [NO AUDIO]
10:02:07AM      THINGS ARE THEORETICALLY DETERMINISTIC.
10:02:13AM      YOU CAN DEBUG THE PROGRAM.
10:02:15AM      WHICH IS THE GREATEST.
10:02:17AM      SO WE'RE GOING TO SPY ON THE NETWORK TO FIGURE OUT
10:02:19AM      WHAT'S GOING ON HERE.
10:02:20AM      THIS IS A PRETTY SIMPLE EXAMPLE OF IT, YOU CAN DO
10:02:24AM      LITTLE MORE COMPLICATED STUFF.
10:02:25AM      SO, IF YOU LOOK AT THIS, THIS IS TOO MUCH STUFF.
10:02:29AM      BUT BASICALLY, I WAS LIKE, JUST SHOW ME EVERYTHING
10:02:32AM      THAT'S BEING SENT ON 4 OR 5,000.
10:02:34AM      AND I DON'T KNOW IF I CAN POINT TO THIS, PROBABLY
10:02:36AM      NOT.
10:02:37AM      BUT YOU CAN SEE THAT UP THERE, THE FIRST PART, IS
10:02:39AM      LIKE WAY MORE STUFF THAT CHROME IS SENDING.
10:02:42AM      AND CAN YOU RECALL IS SENDING WAY -- CURL IS
10:02:47AM      SENDING WAY LESS STUFF.
10:02:49AM      [NO AUDIO]
10:02:51AM      THERE'S THIS HEADER WHERE IT'S LIKE, "ACCEPT
10:02:54AM      LANGUAGE" "ENGLISH" SO CHROME IS LIKE PLEASE GIVE
10:02:58AM      ME HAVE AN ENGLISH WEBSITE.
10:03:00AM      AND CURL IS LIKE GIVE ME A WEBSITE.
10:03:05AM      IT'S OKAY.
10:03:06AM      AND IT'S LIKE I'LL GIVE IT TO YOU IN FRENCH THEN.
10:03:09AM      SO WHAT HAPPENED IS, THEY ACTUALLY REQUESTED
10:03:11AM      DIFFERENT THINGS, RIGHT?
10:03:13AM      AND THIS IS A LITTLE BIT OF A CONTRITE EXAMPLE.
10:03:16AM      I THINK YOU CAN EASILY SEE HOW YOU CAN USE THIS IN
10:03:19AM      MORE SERIOUS NETWORK DID HE DEBUGGING SITUATIONS.
10:03:24AM      SO IF WE USE CURL AND WE'RE LIKE HEY, I WANT AN
10:03:29AM      ENGLISH WEBSITE, HI, WELCOME TO PYTHON.
10:03:32AM      AND NOW WE DON'T NEED TO LEARN FRENCH.
10:03:36AM      EVEN THOUGH LEARNING FRENCH IS PRETTY FUN.
10:03:40AM      SO THERE ARE A LOT OF NETWORKS SPYING TOOLS THAT
10:03:44AM      YOU CAN USE.
10:03:45AM      I USED NGRAP HERE BECAUSE IT WAS THE SIMPLEST ONE I
10:03:49AM      COULD FIND.
10:03:49AM      THERE'S TCP -- WHICH IS A SUPER POWERFUL TOOL WHICH
10:03:54AM      YOU CAN USE TO DUMP ALL YOUR NETWORK TRAFFIC.
10:03:56AM      WIRESHARK IS THE BEST.
10:03:59AM      WIRESHARK IS LIKE A GRAPHICAL TOOL WHICH WILL SHOW
10:04:02AM      YOU NETWORK TRAFFIC AND LET YOU DIG INTO IT.
10:04:06AM      AND UNDERSTAND -- AND IT REALLY HELPS YOU
10:04:09AM      UNDERSTAND WHAT'S GOING ON BECAUSE IT IT WILL
10:04:11AM      INTERPRET ALL THE STUFF FOR YOU.
10:04:14AM      THESE FIRST THREE TOOLS THAT I MENTIONED, ONLY WORK
10:04:17AM      WITH, LIKE, NON-ENCRYPTED TRAFFIC, BECAUSE THE
10:04:20AM      WHOLE POINT OF ENCRYPTED TRAFFIC IS YOU CAN'T SPY
10:04:23AM      ON IT, RIGHT?
10:04:24AM      SO IF YOU'RE USING SPYING TOOLS TO SPY ON TRAFFIC,
10:04:29AM      ENCRYPTED TOOL IS SAYING BLAH.
10:04:32AM      I CAN SEE SOMETHING IS BEING SENT AND THAT'S NOT
10:04:36AM      HELPFUL TO ME.
10:04:37AM      YOU CAN USE MITM PROXY.
10:04:40AM      MAN IN THE MIDDLE PROXY.
10:04:41AM      MAN IN THE MIDDLE YOURSELF, TO SEE THE UNENCRYPTED
10:04:45AM      TRAFFIC.
10:04:46AM      AND THAT'S SUPER USEFUL.
10:04:49AM      SO, LIKE, THIS IS AN AMAZING THING TO DO AGAIN
10:04:51AM      BECAUSE YOU DON'T NEED TO READ YOUR SOURCE CODE.
10:04:54AM      YOU DON'T NEED TO UNDERSTAND AND THINK ABOUT THE
10:04:56AM      LOGIC.
10:04:57AM      JUST SEEING WHAT'S SENT AND WHAT COMES BACK AND
10:05:00AM      WHETHER THAT'S THE RIGHT THING.
10:05:05AM      NOW WE'RE GOING TO TALK ABOUT MY FAVORITE PART.
10:05:08AM      THE CASE OF THE SLOW PROGRAM.
10:05:12AM      PROFILING, USING LIKE SYSTEMS TOOLS IS LIKE THE
10:05:15AM      MOST FUN THING.
10:05:17AM      I HAVE THREE PROGRAMS HERE.
10:05:19AM      ONE OF THEM IS SLOW.
10:05:22AM      BECAUSE IT'S SPENDING TOO MUCH TIME ON THE CPU.
10:05:25AM      SECOND ONE IS SLOW, BECAUSE IT'S DOING TO MUCH IO,
10:05:28AM      WRITING TOO MUCH DATA TO DISK.
10:05:30AM      THIRD ONE IS WAITING FOR SOME SERVER.
10:05:33AM      SO -- AND WHAT WE'RE GOING TO DO IS WE'RE GOING TO
10:05:35AM      IDENTIFY WHICH ONE IS WHICH WITHOUT, LIKE, READING
10:05:37AM      THE CODE OR ANYTHING.
10:05:39AM      WE'RE JUST GOING TO RUN THE PROGRAMS AND THEN WE'RE
10:05:40AM      GOING TO KNOW.
10:05:41AM      BECAUSE WE'RE WIZARDS.
10:05:44AM      AND WE'RE GOING TO USE NEW TOOLS TO DO THIS.
10:05:48AM      ONE OF MY FAVORITE TOOLS WHEN I WAS DOING THIS, WAS
10:05:51AM      ACTUALLY TIME.
10:05:52AM      WHO'S USED THE TIME COMMAND TO FIND OUT HOW LONG
10:05:56AM      SOMETHING TAKES?
10:05:56AM      TIME IS AWESOME.
10:05:57AM      IT DOES TWO THINGS:  TELLS YOU HOW LONG A PROGRAM
10:06:00AM      TOOK.
10:06:00AM      THIS PROGRAM, MYSTERY PROGRAM ONE TOOK TWO SECONDS.
10:06:03AM      WHICH IS, USEFUL INFORMATION.
10:06:06AM      AND IT ALSO TELLS YOU HOW MUCH TIME IT SPENT ON THE
10:06:09AM      CPU.
10:06:11AM      WHICH IS, WHAT -- I HAVE A POLL QUESTION FOR YOU.
10:06:16AM      WHAT IS IT -- IF IT'S NOT ON CPU, WHAT IS IT DOING?
10:06:20AM      IO, MAYBE, BUT FUNDAMENTALLY IT'S...
10:06:25AM      WAITING!
10:06:26AM      IT'S WAITING FOR SOMETHING!
10:06:29AM      WHOEVER SAID WAITING WINS.
10:06:31AM      IT COULD BE WAITING FOR IO, COULD BE WAITING
10:06:35AM      BECAUSE THERE ARE OTHER PROGRAMS DOING STUFF,
10:06:37AM      RIGHT?
10:06:37AM      AND THE OPERATING SYSTEM SCHEDULED IT OFF AND IT'S
10:06:39AM      LIKE SORRY, RIGHT?
10:06:41AM      I HAVE A MORE IMPORTANT --
10:06:45AM      BUT YEAH.
10:06:46AM      IT'S WAITING.
10:06:48AM      SO THIS IS, LIKE, A QUESTION, WHAT IS IT WAITING
10:06:52AM      FOR?
10:06:52AM      AND IT TURNS OUT THAT WE CAN JUST ASK THE OPERATING
10:06:55AM      SYSTEM THIS DIRECTLY, WITHOUT TRYING TO READ THE
10:06:57AM      PROGRAM OR REASON ABOUT IT.
10:06:59AM      SO -- AND WE'RE GOING TO DO THIS BY LOOKING INTO
10:07:03AM      THE KERNEL'S SOUL.
10:07:07AM      PRETTY MUCH LITERALLY.
10:07:08AM      SO THIS IS A LITTLE BIT OF A LOT OF STUFF.
10:07:11AM      BUT BASICALLY WHAT I DID IS, I LOOKED FOR THE PID
10:07:14AM      OF THIS PROCESS, AND I WAS LIKE, HEY, TELL ME WHAT
10:07:17AM      THE KERNEL STACK IS, RIGHT NOW.
10:07:20AM      LIKE, WHAT IS IT DOING?
10:07:22AM      AND THIS IS A LITTLE SMALL, MAYBE FOR YOU AT THE
10:07:24AM      BACK, BUT WHAT IT SAYS IS K -- SK WAIT DATA, TCP, I
10:07:29AM      NET RECEIVE NOTICE, SYS RECEIVED FROM.
10:07:33AM      SO WHAT IS THIS WAITING FOR?
10:07:36AM      NETWORK!
10:07:38AM      IT SAYS LIKE TCP RECEIVE -- EI NET.
10:07:42AM      I'M NOT LIKE A SUPER EXPERT OF UNDERSTANDING WHAT
10:07:45AM      THESE THINGS MEAN, BUT I'M LIKE, SOUNDS LIKE
10:07:47AM      NETWORK TO ME.
10:07:49AM      RIGHT?
10:07:50AM      IT'S WAITING FOR SOME KIND OF NETWORK STUFF.
10:07:52AM      I DON'T KNOW.
10:07:54AM      WHICH IS WAY MORE THAN I KNEW BEFORE.
10:07:56AM      BEFORE WE JUST KNEW IT WAS TAKING TWO SECONDS.
10:07:59AM      AND WE DIDN'T NEED TO -- AND LIKE, THIS IS A SIMPLE
10:08:01AM      PROGRAM.
10:08:02AM      BUT IF THIS WERE A SUPER COMPLICATED PROGRAM, SEE
10:08:04AM      THAT IT'S AWESOME, JUST KNOW WHAT IT'S DOING.
10:08:10AM      WE KNOW --
10:08:13AM      THE SERVER THAT I -- THAT I WROTE, DOES THIS.
10:08:17AM      SO THE REASON IT'S BAITING IS BECAUSE THE SERVER --
10:08:21AM      IT'S WAITING IS BECAUSE THE SERVER HAS BEEN
10:08:23AM      SLEEPING.
10:08:24AM      THAT'S WHY IT WAS WAITING.
10:08:28AM      THE NEXT ONE I WANT TO DO, IS MYSTERY PROGRAM
10:08:31AM      NUMBER TWO.
10:08:35AM      THIS ONE TOOK 2.74 SECONDS, SO THE SAME META TIME,
10:08:41AM      BUT SPENT 99% OF IT'S TIME ON THE CPU.
10:08:44AM      AND THIS, TO ME, IS LIKE ALL I WANT TO KNOW ABOUT
10:08:47AM      THIS PROGRAM.
10:08:48AM      LIKE, IT'S JUST DOING SOME COMPUTATIONS, AND THIS
10:08:52AM      IS LIKE AN INSTANCE WHERE I'M LIKE USE A PYTHON
10:08:57AM      PROFILING.
10:08:58AM      -- THIS IS ALL ABOUT NOT USING PYTHON PROFILERS.
10:09:01AM      IF IT'S SPENDING ALL TIME IN CP -- IN CPU, FIND OUT
10:09:06AM      WHAT PYTHON IS DOING.
10:09:08AM      WE DON'T NEED TO DO SPECIAL OPERATING SYSTEM
10:09:11AM      MATCHING STUFF.
10:09:12AM      LIKE, WE'RE DONE HERE.
10:09:13AM      AND TIME TOLD US EVERYTHING WE NEEDED TO KNOW.
10:09:15AM      WITH -- WHAT THIS PROGRAM IS ACTUALLY DOING IS
10:09:18AM      THIS.
10:09:20AM      [LAUGHTER]
10:09:21AM      IT TAKES A WHILE.
10:09:25AM      [LAUGHTER]
10:09:27AM      YEAH.
10:09:31AM      MYSTERY PROGRAM NUMBER THREE.
10:09:34AM      THIS ONE IS COOL, I WROTE THIS PROGRAM AND I
10:09:36AM      THOUGHT I KNEW WHAT WAS GOING ON WITH IT, AND A
10:09:39AM      WHOLE NEW MYSTERY CAME OUT OF IT AND I HAD TO SOLVE
10:09:42AM      IT AND IT WAS SLOW IN WAYS I DIDN'T EXPECT.
10:09:45AM      SO HERE'S WHAT HAPPENED.
10:09:46AM      I TIMED IT TWICE, AND THE FIRST TIME IT TWO -- TIME
10:09:53AM      IT TOOK TWO SECONDS AND SECOND TIME IT WAS TEN
10:09:56AM      SECONDS.
10:09:57AM      THIS WAS A DETERMINIS TICK PROGRAM.
10:10:02AM      IT TOOK A LONG AMOUNT OF TIME.
10:10:04AM      THE FIRST TIME IT WAS WAITING LIKE -- LIKE 40% OF
10:10:08AM      THE TIME, SPENDING 6 OH -- 60% ON CPU.
10:10:13AM      AND SECOND TIME IT WAS 90% OF THE TIME.
10:10:16AM      AND I ACTUALLY HAD NO IDEA WHY THIS WAS HAPPENING.
10:10:18AM      I WROTE THIS PROGRAM, IT WAS LIKE FOUR LINES OF
10:10:21AM      CODE, RIGHT?
10:10:22AM      SO WE'RE GOING TO DO OUR FIRST STEP.
10:10:25AM      OH, YEAH, WE NEED TO DO A DEMO.
10:10:27AM      THIS IS GOING TO BE FUN.
10:10:28AM      OH, NO.
10:10:29AM      OKAY.
10:10:30AM      SO WE STARTED OUR PROGRAM.
10:10:36AM      WE TRIED TO GET OUR PASSWORD, RIGHT?
10:10:38AM      AND WE'RE GOING TO DO THIS THING WHERE WE LOOK INTO
10:10:40AM      THE CONCERN'S SOUL WHILE IT'S WAITING.
10:10:44AM      LET ME...
10:10:45AM      MAYBE DO THIS IN A DIFFERENT...
10:10:54AM      WILL YOU WORK?
10:10:54AM      WILL YOU TELL ME WHAT IT'S DOING?
10:10:56AM      OKAY.
10:10:57AM      THE PROGRAM IS DONE.
10:10:59AM      WE NEED TO START THE PROGRAM AGAIN.
10:11:00AM      I SPENT A LOT OF TIME, LIKE, DOING THIS.
10:11:02AM      OKAY.
10:11:03AM      SO, WE HAVE LOOKED INTO THE CONCERN'S SOUL AND
10:11:07AM      WE'RE SEEING SOME THINGS LIKE, DO WAIT, BLOCK RIGHT
10:11:12AM      BEGIN, X4 MARK I KNOW DIRTY, BLOCK RIGHT.
10:11:17AM      IT'S DOING RIGHTS, RIGHT?
10:11:19AM      LIKE, I DON'T TOTALLY UNDERSTAND WHAT ALL OF THIS
10:11:21AM      MEANS.
10:11:21AM      I KNOW X4 IS FILE SYSTEM AND I KNOW IT'S WRITING.
10:11:25AM      THAT'S IT.
10:11:28AM      SO THAT'S GREAT.
10:11:29AM      IT'S WRITING STUFF.
10:11:30AM      BUT WHY IS IT TAKING SUCH DIFFERENT AMOUNTS OF
10:11:32AM      TIME, RIGHT?
10:11:33AM      WHY DOESN'T IT TAKE THE SAME AMOUNT OF TIME EVERY
10:11:36AM      TIME?
10:11:36AM      SO I LIKE TO DO THIS A BIT -- WE CAN ACTUALLY LOOK
10:11:39AM      AT WHAT THE PROGRAM DOES.
10:11:41AM      BECAUSE AT THIS POINT, LIKE, IT'S STILL NOT OBVIOUS
10:11:46AM      WHY IT'S SLOW.
10:11:48AM      SO JUST WRITING A WHOLE BUNCH OF STUFF TO THE FILE.
10:11:51AM      AND IT DOESN'T ALWAYS TAKE THE SAME META TIME, SO
10:11:56AM      NOW WE'RE GOING TO USE SOMETHING CALLED DSTAT,
10:12:00AM      WHICH I KIND OF LOVE.
10:12:01AM      IT'S A REALLY GREAT PROGRAM, TELLS YOU HOW MUCH
10:12:03AM      STUFF -- IT CAN TELL YOU HOW MUCH STUFF, LIKE, YOUR
10:12:07AM      OPERATING SYSTEM IS WRITING TO DISK RIGHT NOW.
10:12:09AM      SO I START WRITING DSTAT, I'M NOT DOING A LOT,
10:12:12AM      RIGHT?
10:12:13AM      AND I START THIS PROGRAM.
10:12:16AM      AND THEN ON THE RIGHT, YOU'RE GOING TO SEE DSTAT
10:12:20AM      START TO WRITE A LOT OF DATA.
10:12:21AM      ANSWERING 19 MEGABYTES.
10:12:24AM      42, 42.
10:12:26AM      IT'S HAPPENING.
10:12:28AM      WAITING.
10:12:29AM      DID THE PROGRAM FINISH?
10:12:32AM      THIS IS THE WORSE.
10:12:33AM      I HATE EVERYTHING.
10:12:37AM      LET'S DO IT AGAIN.
10:12:42AM      THIS IS WHAT I LOVE ABOUT LIVE DEMOS.
10:12:44AM      YEAH, OKAY.
10:12:46AM      SO THE PROGRAM STOPPED.
10:12:47AM      DSTAT IS SHOWING YOU IT'S STILL WRITING STUFF.
10:12:51AM      IT'S STILL WRITING.
10:12:51AM      AND NOW IT'S DONE.
10:12:52AM      BUT IT KEPT WRITING FOR LIKE FIVE SECONDS AFTER THE
10:12:55AM      PROGRAM FINISHED.
10:12:56AM      SO THIS IS LIKE, THE FIRST -- THE PROGRAM THOUGHT
10:12:59AM      IT WAS DONE, IT WAS WANT REALLY DONE.
10:13:01AM      IT WAS A LIE.
10:13:03AM      THE PROGRAM WAS LYING.
10:13:05AM      THIS IS BECAUSE THE OPERATING SYSTEM LOVES US.
10:13:08AM      AND WHEN IT WRITES STUFF IT WANTS IT TO BE FAST.
10:13:11AM      AND SO WHAT IT DOES, IT'S LIKE, HEY, YOU WROTE A
10:13:13AM      WHOLE BUNCH OF STUFF, DON'T WORRY, I'LL TAKE CARE
10:13:15AM      OF IT.
10:13:16AM      AND THEN IT CACHES ALL THE THINGS IN MEMORY AND
10:13:19AM      YOUR PROGRAM FINISHES, AND ALL RIGHT, IT WRITES ALL
10:13:23AM      THE STUFF TO DISK AFTERWARDS.
10:13:25AM      THIS IS HOW WRITES WORK BY DEFAULT.
10:13:27AM      YOU CAN SET THEM UP, HEY, DON'T DO WRITES --
10:13:37AM      THEY ACTUALLY WANT TO KNOW THE SYSTEM CRASHES,
10:13:39AM      LIKE, THERE WEREN'T A WHOLE BUNCH OF MORE WRITES
10:13:43AM      THAT NEEDED TO HAPPEN.
10:13:44AM      SO WHAT WAS HAPPENING BEFORE, I WOULD RUN THE
10:13:47AM      PROGRAM, IT WOULD DO SOME WRITES, RIGHT?
10:13:49AM      AND RUN THE PROGRAM AGAIN, AND IT WOULD BE LIKE,
10:13:51AM      OH, I'M NOT -- I'M STILL -- I'M STILL WRITING STUFF
10:13:54AM      FROM THE LAST TIME.
10:13:56AM      AND WOULDN'T BE LIKE READY.
10:13:59AM      TAKE WAY LONGER THE SECOND TIME.
10:14:00AM      WHICH IS REALLY AWESOME.
10:14:04AM      YEAH.
10:14:06AM      SO WE WON.
10:14:08AM      THIS IS EVERYTHING I HAD TO SAY.
10:14:10AM      SO, LIKE, I HOPE THAT I CONVINCED YOU.
10:14:13AM      TREATING YOUR PROGRAM AS A BLACK BOX IS AWESOME AND
10:14:17AM      SUPER FUN.
10:14:18AM      AND YOU'RE LIKE I'M A OPERATING SYSTEM KERNEL
10:14:21AM      HACKER WIZARD.
10:14:22AM      RIGHT?
10:14:23AM      THERE ARE A LOT OF REALLY AWESOME TOOLS YOU CAN USE
10:14:25AM      TO DO THIS KIND OF WORK.
10:14:26AM      A LOT OF THEM ARE LIKE BUILT INTO YOUR COMPUTER.
10:14:31AM      THINGS LIKE DSTAT, RIGHT?
10:14:33AM      /PROC HAS A LOT OF AMAZING STUFF IN IT.
10:14:37AM      THE PEERING INTO YOUR KERNEL SOUL'S STACK THING WE
10:14:41AM      SAW.
10:14:43AM      YOU HAVE DTRACE WHICH IS AMAZING.
10:14:46AM      IF YOU LEARN ABOUT YOUR OPERATING SYSTEM YOU CAN DO
10:14:49AM      SO MUCH MORE THAN YOU DID BEFORE.
10:14:52AM      AND DO IT ACROSS ANY PROGRAMMING LANGUAGE.
10:14:54AM      IT DOESN'T MATTER PYTHON TO PERL.
10:14:57AM      IT'S THE GREATEST.
10:14:58AM      I LEARNED A LOT OF THIS STUFF, IF YOU, LIKE, HAVE A
10:15:01AM      JOB AND YOU WANT TO LEARN AWESOME STUFF.
10:15:03AM      YOU CAN QUIT YOUR JOB AND GO TO THE RECUR CENTER
10:15:09AM      AND HANGOUT AND LEARN ALL KINDS OF THINGS ABOUT
10:15:12AM      PROGRAMMING.
10:15:13AM      THIS IS THE KIND OF THING I DID WHEN I WAS THERE.
10:15:17AM      [NO AUDIO]
10:15:22AM      AND IF YOU WOULD LIKE ONE, I HAVE A LOT OF THEM,
10:15:24AM      AND I WOULD REALLY LIKE YOU TO HAVE ONE.
10:15:26AM      THAT'S ALL.
10:15:27AM      [APPLAUSE]
10:15:45AM      YEAH.
10:15:46AM      >> THANK YOU.
10:15:47AM      >> NO PROBLEM.
10:15:48AM      [MUSIC PLAYING]
10:16:09AM
10:23:05AM
10:23:05AM
10:28:50AM
10:28:50AM
