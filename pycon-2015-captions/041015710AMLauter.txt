01:16:32
01:16:33   >> HELLO, EVERYBODY.
01:18:10   I HOPE YOU ENJOYED KATHERINE'S TALK AND WE'RE
01:18:13   MOVING ON TO MIRIAM LAUTER'S TALK ON MAKING YOUR
01:18:16   OWN AIR CONDITIONER.
01:18:17   THERE WILL BE A MODERATED Q AND A AT THE END SO
01:18:20   SAVE YOUR QUESTIONS AND THE MICROPHONE IS DEAD
01:18:23   CENTER.
01:18:23   OKAY.
01:18:24   THANK YOU.
01:18:24   [ Applause ]
01:18:27   YOU WON'T HAVE TO MAKE THE WHOLE AIR CONDITIONER
01:18:39   YOURSELF.
01:18:39   THIS IS A VERY BIG ROOM.
01:18:40   PEOPLE IN THE BACK, I HAVE TO PRETEND YOU'RE NOT
01:18:42   HERE SO I DON'T PASS OUT.
01:18:44   I KNOW YOU'RE ALL HERE BECAUSE IT'S MANAGED TO BE
01:18:46   A BALMY FEW DEGREES ABOVE FREEZING HERE IN MONDAY
01:18:50   TEMPORARILY AND YOU WANTED TO TALK ABOUT AIR
01:18:52   CONDITIONING.
01:18:52   BUT IF YOU CAN THINK BACK TO WHAT IT'S LIKE OVER
01:18:55   THE SUMMER, I LIVE IN NEW YORK, IT GETS PRETTY
01:18:57   MUGGY AND I WOULD COME HOME TO MY ROOM AND I
01:19:04   WOULD MAKE A BEELINE FOR THE AIR CONDITIONER AND
01:19:08   STAND THERE TRYING NOT TO TOUCH ANYTHING, AND
01:19:10   FINALLY THE ROOM WOULD COOL DOWN AND I WOULD GO
01:19:15   TO BED AND THEN I WOULD WAKE UP IN THE MIDDLE OF
01:19:18   THE NIGHT FREEZING, AND I STARTED TO THINK TO
01:19:20   MYSELF, MAN, WOULDN'T IT BE GREAT IF THERE WAS
01:19:23   SOME WAY TO HAVE YOUR AIR CONDITIONER SORT OF
01:19:26   CONTROL THE TEMPERATURE ITSELF AND MAYBE YOU
01:19:28   COULD EVEN TURN IT ON BEFORE YOU GOT HOME, AND
01:19:32   THEN I THOUGHT, SOMEONE HAS ALREADY MADE THAT.
01:19:35   THAT'S ALREADY A THING.
01:19:36   BUT, I DECIDED TO MAKE IT MYSELF SO TODAY I'M
01:19:39   GOING TO TALK TO YOU ABOUT HOW I MADE THAT
01:19:41   HAPPEN.
01:19:41   AND I JUST WANT TO GET A SENSE HOW MANY OF YOU IN
01:19:44   THE ROOM HAVE DONE A PROJECT WITH RASPBERRY PI
01:19:47   BEFORE?
01:19:47   OKAY, COOL.
01:19:49   AND HOW MANY OF YOU HAVE WRITTEN ANY KIND OF WEB
01:19:52   APP BEFORE?
01:19:52   AWESOME.
01:20:00   FOR ME IT WAS A HELLO PROJECT, AND THAT'S THE WAY
01:20:04   I'M GOING TO APPROACH IT BUT I HOPE IT GIVES YOU
01:20:06   SOME INSPIRATION FOR COOL HOME SMART PROJECTS OF
01:20:09   YOUR OWN.
01:20:10   SO THE GOAL AS I SAID IS TO BE ABLE TO TURN YOUR
01:20:12   AIR CONDITIONER ON AND OFF WHEN YOU'RE NOT AT
01:20:14   HOME, BUT ALSO TO BE ABLE TO TURN IT INTO A
01:20:17   THERMOSTAT SO IT CAN CONTROL THE TEMPERATURE FOR
01:20:19   YOU.
01:20:19   BUT TO BE A LITTLE BIT MORE SPECIFIC, IT'S GOING
01:20:24   TO BE SOMETHING A LITTLE LIKE THIS.
01:20:26   YOU'LL HAVE A RASPBERRY PI THAT CONTROLS YOUR AIR
01:20:30   CONDITIONER AND THE AIR TEMPERATURE AND IT WILL
01:20:32   BE CHECKING IN, SAYING, HERE'S WHAT'S GOING ON,
01:20:34   WHAT DO I DO?
01:20:36   AT SOME TIME, YOU'LL TELL IT, "TURN ON."
01:20:40   WHEN IT CHECKS IN NEXT, IT WILL GET THAT
01:20:41   INSTRUCTION AND IT WILL TURN ON.
01:20:43   AND IN A SLIGHTLY MORE COMPLICATED WAY, YOU'LL
01:20:50   DO -- WANT TO SET A PARTICULAR TEMPERATURE.
01:20:52   SO, AGAIN, THE RASPBERRY PI WILL BE CHECKING IN,
01:20:57   CHECKING IN, AND EVENTUALLY YOU'LL TELL IT, BE AT
01:21:02   72 DEGREES OR SOMETHING LIKE THAT AND WHEN THE
01:21:04   AIR CONDITIONER NEXT CHECKS IN, YOUR SERVER WILL
01:21:07   FIGURE OUT WHAT IT SHOULD DO AND IT WILL RESPOND
01:21:10   ACCORDINGLY.
01:21:11   THERE ARE A COUPLE OF COMPONENTS, FIRST I'LL TALK
01:21:18   ABOUT HOW TO SETS UP THE HARDWARE TO MAKE THESE
01:21:20   THINGS POSSIBLE AND THEN TALK ABOUT WRITING A
01:21:22   SIMPLE WEB APP IN FLASK SO WE CAN COMMUNICATE
01:21:25   WITH THE AIR CONDITIONER.
01:21:32   TO GET STARTED, YOU'LL NEED SOME STUFF, SO
01:21:34   ASSUMING YOU ALREADY HAVE AN AIR CONDITIONER, I
01:21:38   ESTIMATE THE COST FOR ALL OF THESE THINGS, WHEN I
01:21:41   DID THE PROJECT WAS SOMEWHERE BETWEEN 80 AND
01:21:43   $100.
01:21:44   THE GREAT THING IS, ALL OF THESE PARTS ARE
01:21:46   REUSABLE SO WHEN IT'S WINTER AND YOU DON'T NEED
01:21:48   YOUR AIR CONDITIONER, YOU CAN STATE APART AND USE
01:21:51   EVERYTHING AGAIN.
01:21:52   I HIGHLY RECOMMEND ADAFRUIT.COM, PRETTY MUCH
01:22:01   EVERYTHING I BOUGHT AND EVERYTHING I USE ALL THE
01:22:04   TUTORIALS I USED CAME FROM ADAFRUIT, SO I HIGHLY
01:22:10   RECOMMEND IT.
01:22:10   YOU'LL NEED AN AIR CONDITIONER.
01:22:12   TO DID THE PROJECT THE WAY I DID IT, NEEDS TO BE
01:22:14   WINDOW UNIT AIR CONDITIONER THAT PLUGS INTO
01:22:16   A.C. POWER, DRAWS LESS THAN 15 AMPS, AND AS
01:22:21   ALWAYS, THERE IS A SMALL CHANCE THAT SOMETHING
01:22:23   COULD GO WRONG SO YOU KNOW, JUST BE MINDFUL OF
01:22:27   THAT, BUT MY AIR CONDITIONER IS STILL INTACT.
01:22:30   YOU NEED A RASPBERRY PI.
01:22:31   YOU NEED SOME OTHER COMPONENTS FOR IT, AND DON'T
01:22:35   WE ARE IF I'M GOING A LITTLE QUICKLY THROUGH
01:22:36   THIS, I WILL MAKE THE SLIDES AVAILABLE LATER AND
01:22:42   I ALSO WROTE A BLOG POST ABOUT GETTING STARTED
01:22:44   WITH RASPBERRY PI FOR THE FIRST TIME IF YOU
01:22:47   HAVEN'T DONE THAT, THERE WERE SOME THING THAT
01:22:48   WERE A BIT TRICKY FOR ME LIKE SETTING SET UP WITH
01:22:51   WiFi, SO CHECK IT OUT.
01:22:53   NEED A LITTLE BIT MORE STUFF, A POWER SWITCH OR
01:22:58   RELAY, WHICH I'LL TALK ABOUT, A TEMPERATURE
01:23:02   SENSOR, SOME WIRES, PCB PAPER, SOME TOOLS AND
01:23:05   WE'LL SEE WHAT WE DO WITH THOSE LATER.
01:23:08   AND FOR TESTING OR DEBUGGING, I HIGHLY RECOMMEND
01:23:12   YOU HAVE A BREAD BOARD AND SOME LEDs AND THAT'S
01:23:17   JUST SO THAT YOU CAN DO A SOLDER-LESS CIRCUIT,
01:23:21   PLUG AND PLAY, AND YOU WON'T HAVE TO HAVE ANY HOT
01:23:23   METAL AND HONESTLY YOU COULD DO THE WHOLE PROJECT
01:23:26   JUST WITH A BREAD BOARD, IT HOLDS THINGS IN
01:23:29   PRETTY TIGHTLY BUT THERE IS A SMALL CHANCE THAT
01:23:32   THINGS COULD FALL OUT.
01:23:32   AND A MULTI-METER IS NICE TO HAVE FOR DEBUGGING
01:23:36   BUT DEFINITELY NOT NECESSARY.
01:23:37   SO NOW THAT YOU HAVE ALL THE STUFF, I'M GOING TO
01:23:40   TALK ABOUT HOW TO PUT IT ALL TOGETHER IN ORDER TO
01:23:42   LAY THE GROUNDWORK FOR THIS APPLICATION THAT
01:23:45   WE'RE GOING TO BUILD.
01:23:47   SO THERE'S TWO THINGS THAT THE RASPBERRY PI IS
01:23:50   GOING TO NEED TO BE ABLE TO DO.
01:23:52   IT NEEDS TO BE ABLE TO TURN YOUR AIR CONDITIONER
01:23:54   ON AND OFF, AND IT NEEDS TO BE ABLE TO MEASURE
01:23:57   THE TEMPERATURE IN YOUR ROOM.
01:24:00   SO TO DO THAT, TWO SIMPLE CIRCUITS.
01:24:04   FIRST, WE'LL NEED TO MAKE THE RASPBERRY PI ABLE
01:24:07   TO CONTROL THE AIR CONDITIONER SO TO DO THAT,
01:24:10   WE'LL USE A RELAY, AN ELECTRICALLY CONTROLLED
01:24:12   SWITCH.
01:24:13   SO IT'S AS IF YOU TOOK YOUR AIR CONDITIONER'S
01:24:15   POWER CORD AND JUST CUT IT IN THE MIDDLE AND
01:24:17   BETWEEN THE PART THAT PLUGS INTO THE WALL AND THE
01:24:19   PART THAT PLUGS INTO YOUR AIR CONDITIONER, YOU
01:24:21   PUT LIKE A LIGHT SWITCH BUT INSTEAD OF
01:24:24   CONTROLLING IT WITH YOUR HAND, WE'RE JUST GOING
01:24:26   TO CONTROL IT WITH A LITTLE BIT OF POWER COMING
01:24:28   FROM ONE OF THE RASPBERRY PI'S OUTPUT PINS.
01:24:31   SO WHEN POWER FLOWS FROM THAT PIN, THE SWITCH
01:24:33   WILL CLOSE AND POWER CAN FLOW FROM THE WALL TO
01:24:36   YOUR AIR CONDITIONER AND WHEN WE SET THAT OUTPUT
01:24:40   PIN LOW AND NO POWER COMES FROM IT, THEN THE
01:24:42   SWITCH WILL OPEN AND THE AIR CONDITIONER WILL
01:24:45   TURN OFF, AND THE AIR CONDITIONER ITSELF WILL
01:24:48   ALWAYS BE IN THE ON POSITION, SO ON MINE, THAT'S
01:24:50   JUST THE DIAL IS TURNED TO "ON" ALL THE TIME.
01:24:53   AND SO THE FIRST THING YOU SHOULD DO IS CONSULT A
01:24:57   PIN-OUT MAP OF YOUR RASPBERRY PI AND I LOOK TO
01:25:01   LOOK AT ONE THAT HAS THE PICTURE OF THE RASPBERRY
01:25:03   PI IN THE BACKGROUNDS SO YOU CAN BE ORIENTED AND
01:25:06   FIND A PIN LABELED GPIO FOR GENERAL PURPOSE
01:25:10   INPUT/OUTPUT.
01:25:11   I HAPPENED TO USE A TEMPERATURE SENSOR THAT HAD
01:25:14   SOME CODE, THAT HARD-CODED USING GPI 4 SO I USED
01:25:18   THAT ONE, SO LET'S GO PICK PIC GPIO 17.
01:25:23   SO CONNECT BRIGHTLY COLORED WIRE TO THAT ONE AND
01:25:26   THEN A DARK-COLORED WIRE, JUST SO YOU KNOW WHICH
01:25:30   ONE HAS POWER FLOWING FROM IT, AND CONNECT THAT
01:25:32   TO GROUND.
01:25:33   AND THEN YOU'LL TAKE YOUR POWER SWITCH AND THE
01:25:38   RED WIRE WILL GO INTO THE PLUS-IN SPOT AND THE
01:25:43   BLACK WIRE GOES INTO MINUS IN, AND YOU CAN IGNORE
01:25:46   THE THIRD SPOT LABELED "GROUND" BECAUSE YOU'RE
01:25:49   ALREADY GROUNDED.
01:25:50   AND IT HAS SOME SCREW DRIVERS IN THE TOP -- HAS
01:25:54   SOME SCREWS IN THE TOP SO YOU CAN PUTS THE WIRE
01:25:56   IN AND SCREW IT BACK DOWN SO IT DOESN'T JUST FALL
01:25:59   OUT AND YOU'LL BE ABLE TO CONTROL THE AIR
01:26:01   CONDITIONER RELIABLY.
01:26:04   NOW, WHILE YOU'RE TESTING YOUR APPLICATION, ONCE
01:26:07   WE'VE WRITTEN IT, THERE'S REALLY NO REASON TO BE
01:26:09   CONNECTED TO THE POWER SWITCH OR YOUR AIR
01:26:11   CONDITIONER AT ALL.
01:26:13   IT'S KIND OF HARD TO LUG AROUND WITH YOU, YOU
01:26:15   MIGHT WANT TO TEST IT SOMEWHERE ELSE, AND BECAUSE
01:26:16   ALL WE'RE DOING IS CONTROLLING WHETHER POWER IS
01:26:20   FLOWING FROM THAT RASPBERRY PI OUTPUT PIN, YOU
01:26:23   CAN JUST CONNECT IT TO AN LED IN YOUR BRED BOARD
01:26:27   AND IF YOU CAN TURN YOUR LIGHT ON, YOU CAN TURN
01:26:29   YOUR AIR CONDITIONER ON.
01:26:30   SO NOW THAT WE CAN CONTROL THE AIR CONDITIONER
01:26:34   FROM THE RASPBERRY PI, WE ALSO NEED TO BE ABLE TO
01:26:38   MEASURE TEMPERATURE IN THE ROOM.
01:26:39   TO DO THAT, I USED A DIGITAL TEMPERATURE SENSOR
01:26:44   AND I WON'T GO INTO TOO MUCH DETAIL ABOUT HOW THE
01:26:49   CIRCUIT IS WIRED UP.
01:26:50   AGAIN, I BOUGHT IT FROM ADAFRUIT THEY HAD A NICE
01:26:56   TUTORIAL, CODE SAMPLE, REALLY EASY.
01:26:58   ALL YOU NEED TO KNOW IS THE YELLOW WIRE IS THE
01:27:01   DATA WIRE AND THAT WILL ALSO BE CONNECTED TO A
01:27:03   GPIO PIN BUT THIS TIME WILL BE READING FROM IT,
01:27:06   WILL BE COLLECTING DATA AND THAT WILL BE
01:27:08   CONVERTED INTO FAHRENHEIT OR CELSIUS DEGREES,
01:27:11   WHATEVER YOU PREFER.
01:27:12   AND SOMETIMES IT'S A LITTLE BIT EASIER TO SEE THE
01:27:14   DIAGRAM THIS WAY.
01:27:16   AND THEN, ONCE YOU'RE ALL SET WITH THAT, YOU CAN
01:27:19   SOLDER IT TOGETHER ON SOME PROTOTYPE PCB PAPER
01:27:22   BUT, AGAIN, YOU DEFINITELY DON'T HAVE TO, YOU CAN
01:27:25   LEAVE IT IN THE BREAD BOARD.
01:27:27   SO NOW WE HAVE ALL THE CONNECTIONS IN PLACE THAT
01:27:30   WILL MAKE IT POSSIBLE FOR THE AIR CONDITIONER TO
01:27:34   CONTROL -- FOR THE RASPBERRY PI TO CONTROL YOUR
01:27:38   AIR CONDITIONER AND SENSE TEMPERATURE IN THE
01:27:39   ROOM.
01:27:39   SO WE HAVE THE AIR CONDITIONER, THE RASPBERRY PI,
01:27:43   THE DIGITAL TEMPERATURE SENSOR AND THEY'RE ALL
01:27:45   CONNECTED.
01:27:45   NOW THAT THAT IS READY, I'M GOING TO TALK A BIT
01:27:51   ABOUT HOW TO WRITE A SIMPLE WEB APP IN FLASK
01:27:54   BECAUSE IT'S GREAT THAT WE HAVE ALL THIS HARDWARE
01:27:56   CONNECTED BUT IF WE CAN'T COMMUNICATE WITH IT IN
01:27:59   ANY WAY, IT'S KIND OF USELESS.
01:28:00   SO WE'RE GOING TO NEED SOMETHING HOSTED SOMEWHERE
01:28:07   ON THE INTERNET WHERE YOU CAN GO TO A PAGE IN
01:28:09   YOUR BROWSER AND YOU CAN SEND SOME INSTRUCTIONS
01:28:11   THAT YOU WANT YOUR AIR CONDITIONER TO FOLLOW, AND
01:28:14   THE RASPBERRY PI WILL ALSO NEED TO BE ABLE TO
01:28:18   REACH THIS PLACE, WHEREVER IT IS, AND GET SOME
01:28:21   INFORMATION THAT YOU'VE LEFT FOR IT AND TELL YOU
01:28:23   WHAT THE TEMPERATURE IS ENGINEER ROOM AND OTHER
01:28:25   THINGS -- IS IN YOUR ROOM AND OTHER THINGS LIKE
01:28:28   THAT.
01:28:28   AND WE'LL NEED TO BE ABLE TO STORE THAT
01:28:30   INFORMATION IN BETWEEN, SO THE RASPBERRY PI WILL
01:28:33   CHECK IN AND SAY, IT'S 70 DEGREES IN YOUR ROOM
01:28:35   AND THE AIR CONDITIONER IS ON.
01:28:36   WE'LL NEED TO STORE THAT SO WHEN THE USER GOES TO
01:28:40   THE PAGE IN THEIR BROWSER, THEY CAN SEE THAT
01:28:44   INFORMATION AND THEY CAN ALSO SEND SOME
01:28:47   INFORMATION, NEED TO STORE -- OH, THE USER SAID
01:28:50   THEY WANT THE AIR CONDITIONER TO BE ON SO THAT
01:28:51   WHEN THE RASPBERRY PI CHECKS IN, IT WILL GET THAT
01:28:56   INFORMATION BACK.
01:28:56   TO DO THIS, I USED GLASS, WHICH IS A WEB MIGHT BE
01:29:00   ROW FRAMEWORK FOR PYTHON.
01:29:02   SUPER LIGHTWEIGHT, REALLY EASY TO SET UN, CAN
01:29:05   WRITE A ONE-PAGE APPLICATION SO I HIGHLY
01:29:07   RECOMMEND IT.
01:29:07   SOME REALLY GREAT RESOURCES OUT THERE ON THE
01:29:10   INTERNET.
01:29:10   AND IN PARTICULAR, THE FLASK TUTORIAL, DEFINITELY
01:29:15   MORE INFORMATION THAN YOU EVEN NEED TO DO THIS
01:29:17   PROJECT BUT IT'S SUPER INTERESTING READ.
01:29:19   SO YOU JUST SET UPROOT DIRECTORY WITH YOUR APP.PI
01:29:26   FILE IN IT AND TWO SUBDIRECTORIES, ASSETS AND
01:29:30   TERM PLATES, ASSETS FOR ANY CSS OR -- AND TEMP
01:29:35   PLATES FOR HTML, AND THIS IS WHAT A SIMPLE HOLLOW
01:29:39   WORLD APPLICATION LOOKS LIKE IN FLASK.
01:29:42   AND YOU MAY RECOGNIZE THE DECORATOR SYNTAX AND IF
01:29:45   YOU'RE FAMILIAR WITH DECORATORS IN PYTHON, THAT'S
01:29:47   AWESOME.
01:29:48   IF YOU'RE NOT THAT FAMILIAR WITH THEM, THAT'S
01:29:50   ALSO TOTALLY FINE.
01:29:51   WHAT YOU NEED TO KNOW IS THIS SAYS, ADD THE
01:29:55   FOLLOWING RULE.
01:29:55   WHEN WE GET A REQUEST FROM A URL LIKE SLASH, IN
01:30:00   THIS CASE, WWW.MYSITE.COM SLASH, THEN RUN THE
01:30:05   FOLLOWING FUNNELS, RUN THE HELLO FUNCTION HIM AND
01:30:07   THAT FUNCTION IS GOING TO GO FIND THE TEMPLATE
01:30:10   CALLED INDEX POTT HTML, WILL PASS IN WHATEVER
01:30:15   VARIABLES WE'VE GIVEN IT AND FLASK COMES WITH A
01:30:18   TEMPLATING ENGINE CALLED GINGA, SO IT WILL POP
01:30:21   THAT DATA INTO THE TEMPLATE AND THEN DISPLAY --
01:30:28   OH, I GUESS THAT'S A LITTLE OFF THE SCREEN.
01:30:31   OH, I GUESS IT'S STILL OFF THE SCREEN.
01:30:43   IT WILL DISPLAY SOMETHING LIKE HELD LOW, WORLD
01:30:45   AND HELLO, MIRIAM.
01:30:46   IF YOU RUN IT IN DEBUG MODE, YOU'LL GET A NICE
01:30:52   STACK TRACE ON THE PAGE WHICH IS CONVENIENT.
01:30:54   WITH THAT HELLO WORLD APPLICATION, WE ONLY HAD
01:30:58   ONE END POINT, THE HELLO ROUTE, AND FOR THIS
01:31:02   APPLICATION, WE'LL ACTUALLY NEED THREE END
01:31:04   POINTS, SO, FIRST, WE HAVE THE HOME PAGE, AND FOR
01:31:09   THAT, WE'LL JUST GET SOME INFORMATION THAT THE
01:31:12   SERVER HAS STORED ABOUT WHAT'S GOING ON IN THE
01:31:14   ROOM AND DISPLAY THE FORM THAT YOU WOULD USE TO
01:31:18   SEND SOME INFORMATION TO YOUR SERVER ABOUT WHAT
01:31:20   YOU WANT THE AIR CONDITIONER TO DO.
01:31:21   AND THEN WE'LL NEED TO WRITE THE END POINT TO
01:31:24   ACTUALLY DO THAT, TO ALLOW YOU TO SUBMIT THAT
01:31:27   FORM WITH YOUR INSTRUCTIONS, AND WE'LL NEED A
01:31:30   ROOT FOR THE RASPBERRY PI TO CHECK IN, GIVE THE
01:31:33   SERVER INFORMATION ABOUT WHAT'S GOING ON IN THE
01:31:35   ROOM AND GET INSTRUCTIONS BACK.
01:31:37   SO THE FIRST END POINT FOR THE HOME PAGE LOOKS
01:31:41   VERY MUCH LIKE THE HELLO WORLD EXAMPLE.
01:31:45   AND YOU CAN SEE, YOU CAN ADD AS MANY ROOT
01:31:48   DECORATORS AS YOU WANT SO IN THIS CASE BOTH SLASH
01:31:53   AND INDEX WILL GIVE YOU THE HOME PAGE.
01:31:55   AND THE ONLY DIFFERENCE IS WE'LL NEED TO GET DATA
01:31:57   THAT HAS BEEN STORED BY THE RASPBERRY PI TO
01:32:01   DISPLAY, AND YOU CAN DO THAT REALLY HOWEVER YOU
01:32:03   WANT.
01:32:03   WHEN I DID IT, I USED THE PYTHON SQL 8 LIBRARY 3,
01:32:09   MOSTLY I WANTED TO KEEP SOME INFORMATION ABOUT
01:32:12   WHAT THE TEMPERATURE WAS IN MY ROOM AND HOW MUCH
01:32:14   I WAS USING MY AIR CONDITIONER BUT IF YOU DON'T
01:32:16   WANT TO DO THAT, AND HOPEFULLY NO ONE WILL YELL
01:32:20   AT ME BUT YOU CAN PROBABLY JUST STORE IT IN A
01:32:22   GLOBAL VARIABLE AND EVERYTHING WILL BE OKAY.
01:32:24   AND IT WILL DISPLAY A BEAUTIFUL PAGE, SOMETHING
01:32:30   LIKE THAT, AND YOU'LL SEE THE MOST UP-TO-DATE
01:32:34   INFORMATION YOU HAVE ABOUT YOUR ROOM AND YOUR AIR
01:32:36   CONDITIONER AND THE FORM YOU WOULD USE TO SEND
01:32:37   SOME INFORMATION.
01:32:38   NOW, AS YOU CAN SEE, THE USER HAS SORT OF THREE
01:32:42   POSSIBLE THINGS THEY MIGHT WANT TO SAY TO THEIR
01:32:44   AIR CONDITIONER.
01:32:44   YOU MIGHT WANT TO SAY JUST TURN ON AND BE ON, OR
01:32:47   YOU MIGHT WANT TO JUST SAY TURN ON AND BE OFF OR
01:32:50   YOU MIGHT WANTS TO SAY, KEEP MY ROOM AT 72
01:32:53   DEGREES.
01:32:53   BUT THE THING IS, THE RASPBERRY PI REALLY ONLY
01:32:58   UNDERSTANDS TWO STATES.
01:33:00   IT CAN SETS THE SWITCH PIN HIGH AND TURN ITS ON
01:33:03   OR SET IT LOW AND TURN THE AIR CONDITIONER OFF SO
01:33:06   WE NEED A WAY TO TRANSLATE BETWEEN WHAT THE USER
01:33:08   WANTS THE AIR CONDITIONER TO BE DOING AND WHAT
01:33:10   THE RASPBERRY PI CAN ACTUALLY CARRY OUT.
01:33:12   SO THERE WILL BE SORT OF A MIDDLE LAYER, WE'LL GO
01:33:15   FROM THE THREE STATES THE USER KNOWS AND THEN
01:33:18   WRITE A FUNCTION TO TRANSLATE THAT INTO THE STATE
01:33:20   THE RASPBERRY PI UNDERSTANDS, AND ON AND OFF, TO
01:33:25   MAP NICELY TO ON AND OFF BUT WHEN SPECIFY A
01:33:27   TEMPERATURE, I'LL NEED TO CHECK WHAT IS THE
01:33:30   TEMPERATURE IN THE ROOM RIGHT NOW, WHAT
01:33:32   TEMPERATURE DID THE USER SAY THEY WANTED AND THEN
01:33:34   RETURN A RESPOND TO RASPBERRY PI WITH EITHER ONE
01:33:38   OR ZERO, ON OR OFF, ACCORDINGLY.
01:33:40   SO NOW WE'LL WRITE THAT END POINT FOR THE USER
01:33:44   AND WE'LL GET THE DATA THAT THEY SEND IN THEIR
01:33:48   POST REQUEST, FIND THE MOST RECENTLY TRANSLATED
01:33:53   TEMPERATURE, TRANSLATES THAT INTO THE DESIRED
01:33:56   STATE AND STORE THAT SOMEWHERE.
01:33:58   FINALLY, WE'LL WRITE THE ROOT FOR THE RASPBERRY
01:34:00   PI AND WE'LL GET THE DATA FROM THE RASPBERRY PI'S
01:34:05   POST-REQUEST, STORE THAT TEMPERATURE AND THE AIR
01:34:08   CONDITIONER STATE SOMEWHERE, AND THEN WE'LL
01:34:10   RESPOND TO THAT REQUEST WITH WHATEVER THE MOST
01:34:13   RECENTLY STORED DESIRED STATE FROM THE USER IS.
01:34:15   SO NOW THAT THAT APPLICATION IS UP AND RUNNING,
01:34:23   THE LAST PIECE OF THE PUZZLE IS IT'S ALL WELL AND
01:34:27   GOOD, WE COULD GO TO THIS WEBSITE, WE COULD SEND
01:34:29   SOME INFORMATION, SAY WE WANT THE AIR CONDITIONER
01:34:31   TO BE ON BUT IF THE RASPBERRY PI ISN'T CHECKING
01:34:34   IN WITH THE SERVER, IT'S NEVER GOING TO GET THAT
01:34:37   INFORMATION BECAUSE THE ONLY WAY WE'RE SENDING IT
01:34:38   INSTRUCTIONS IS WE'RE RESPONDING TO THE RASPBERRY
01:34:41   PI'S POST REQUEST.
01:34:43   SO RASPBERRY PI WILL NEED TO MAKE REQUESTS, SET
01:34:48   THE SWITCH PIN HIGH OR LOW ACCORDINGLY AND DO
01:34:51   THAT OVER AND OVER AND OVER AGAIN.
01:34:53   SO IN ORDER TO MAKE REQUESTS, I USE THE REQUEST
01:34:57   LIBRARY.
01:34:58   IT'S GREAT, SUPER EASY.
01:35:00   YOU PUT IN THE URL/THE ROOT -- THE ENDS POINT YOU
01:35:06   JUST WROTE, SEND THE DATA ABOUT THE ROOM AND THE
01:35:09   AIR CONDITIONER, AND THE RESPONSE WILL BE STORED
01:35:12   IN THIS VARIABLE "R."
01:35:14   AND THEN WE NEED TO BE ABLE TO SET THE SWITCH PIN
01:35:17   AND IN ORDER TO DO THAT, YOU NEED ANOTHER PYTHON
01:35:22   LIBRARY CALLED RPYTHON.GPIO.
01:35:28   YOU TELL IT WHICH ONE YOU'RE USING AS THE SWITCH
01:35:31   PIN, YOU'LL TELL IT IT'S AN OUTPUT PIN AND SET IT
01:35:34   FALSE TO START, AND WRITE A SIMPLE FUNCTION TO
01:35:36   CHECK WHETHER THAT PIN IS HIGH OR LOW.
01:35:38   FINALLY, WE'LL PUT IT ALL TOGETHER AND CONTROL
01:35:46   THE AIR CONDITIONER, MAGICALLY.
01:35:48   IT WILL LOOK LIKE THIS, MAKE THE REQUEST, GET THE
01:35:53   RESPONSE AND FIT COMES BACK WITH 1, SET THE
01:35:55   SWITCH PIN HIGH AND TURN THE AIR CONDITIONER ON.
01:35:58   COMES BACK WITH ZERO, THEN WE'LL SET THE SWITCH
01:36:02   PIN LOW AND TURN THE AIR CONDITIONER OFF.
01:36:05   NOW, THAT'S GREAT IF WE DO THAT ONCE, MAYBE GET
01:36:11   ONE INSTRUCTION BUT WE'LL NEED TO PUT THAT IN A
01:36:14   LOOP AND DO THIS OVER AND OVER AND OVER AGAIN.
01:36:17   AND I THINK MINE WAS GOING LIKE EVERY SECOND OR
01:36:20   SOMETHING LIKE THAT.
01:36:21   AND THAT'S ALL WELL AND GOOD AND IT WORKS FOR A
01:36:23   WHILE BUT WHAT HAPPENS -- OOPS.
01:36:25   WHAT HAPPENS IF THE SERVER DOESN'T RESPOND?
01:36:29   AND THAT'S GOING TO HAPPEN AT SOME POINT.
01:36:31   YOU'RE JUST MAKING REQUESTS OVER AND OVER AND
01:36:33   OVER AGAIN, AND RIGHT NOW, IF WE JUST HAVE A WILD
01:36:38   LOOP, IT'S GOING TO BREAK, EXIT AND WE'LL LOSE
01:36:40   CONTACT WITH THE RASPBERRY PI ENTIRELY.
01:36:43   AND THAT KIND OF WAS MY WORST-CASE SCENARIO THAT
01:36:46   I WOULD BE AWAY FROM HOME, TURN THE AIR
01:36:47   CONDITIONER ON FOR SOME REASON AND EVERYTHING
01:36:49   WOULD CRASH AND I WOULDN'T BE ABLE TO TURN IT OFF
01:36:51   AND IT WOULD BE SITTING THERE WASTING POWER.
01:36:54   SO JUST TO MAKE THAT A BIT MORE RESILIENT, WE CAN
01:37:00   PUT THAT IN A TRICATCH LOCK, TRY TO MAKE THE
01:37:03   REQUEST.
01:37:04   IF IT SUCCEEDS, KEEP GOING IN THE LOOP, WAITS A
01:37:06   SECOND, TRY AGAIN.
01:37:07   WAIT A SECOND, DO IT AGAIN.
01:37:09   BUT IF IT FAILS, THEN WE'LL CHECK HOW LONG HAS IT
01:37:15   BEEN SINCE THE LAST TIME WE GOT A SUCCESSFUL
01:37:17   REQUEST?
01:37:17   AND IF IT'S BEEN UNDER FIVE MINUTES, JUST KEEP
01:37:21   GOING, JUST KEEP TRYING.
01:37:22   IF IT'S BEEN OVER FIVE MINUTES, TURN THE AIR
01:37:24   CONDITIONER OFF AND THEN JUST KEEP TRYING BECAUSE
01:37:28   HOPEFULLY THE SERVER WILL COME BACK AT SOME POINT
01:37:30   OR YOU'LL FIX IT, YOU'LL GO IN AND SEE WHAT WENT
01:37:34   WRONG AND THAT WAY YOU DON'T HAVE TO SSH BACK
01:37:36   INTO YOUR RASPBERRY PI AND START THE PROGRAM
01:37:39   RUNNING AGAIN.
01:37:39   IT JUST HOPEFULLY WON'T CRASH AND WILL JUST KEEP
01:37:42   WAITING AND THAT WAY YOU CAN ENJOY A PERFECTLY
01:37:47   TEMPERATURE-CONTROLLED ROOM ALL SUMMER.
01:37:49   AND I JUST HAVE SOME FINAL NOTES, OR REALLY A
01:37:55   FINAL NOTE, WHICH IS ABOUT SECURITY.
01:37:59   AS WE ALL KNOW, THE INTERNET ISN'T THE SAFEST
01:38:01   PLACE AND BEYOND JUST LIKE SOMEONE MALICIOUS
01:38:05   TRYING TO EXECUTE CODE ON YOUR SERVER OR
01:38:08   SOMETHING COMPLICATED, IT WOULD BE PRETTY BAD IF
01:38:10   JUST LIKE ANY OLD PERSON COULD FIND YOUR WEBSITE
01:38:12   HOSTED WHEREVER ON HEROKU OR SOMETHING, AND TURN
01:38:16   YOUR AIR CONDITIONER ON.
01:38:18   SO AT MINIMUM, JUST LIKE YOU CAN USE ROUTE
01:38:24   DECORATORS IN FLASK TO MAP URLS TO FUNCTION, YOU
01:38:31   CAN USE OTHER DECORATORS, SO YOU COULD WRITE A
01:38:33   LOG-IN REQUIRED FUNCTION THAT CHECKS SOME
01:38:35   CREDENTIALS OF SOME SORT, USE A DECORATOR, WRAP
01:38:37   THAT AROUND YOUR VIEW FUNCTION AND THEN IF THE
01:38:42   CREDENTIALS AREN'T THERE, DON'T EXECUTE THE
01:38:45   FUNCTION, AND YOU SHOULD ALSO PROBABLY CHECK THAT
01:38:48   THE INPUT THAT YOU'RE GETTING IS WHAT YOU EXPECT
01:38:51   SO IF IT'S THE FORM IN THE BROWSER YOU EXPECT TO
01:38:54   BE GETTING A NUMBER AND YOU EXPECT IT TO BE A
01:38:56   TEMPERATURE IN SOME REASONABLE RANGE, AND IF IT'S
01:39:00   THE RASPBERRY PI, YOU EXPECT TO GET THE
01:39:02   TEMPERATURE IN THE ROOM AND JUST A BOOLEAN
01:39:05   ON-OFF, SO YOU SHOULD PROBABLY MAKE SURE OF THAT.
01:39:09   AND NOW I WILL SHOW YOU A QUICK DEMO OF MY AIR
01:39:12   CONDITIONER IN ACTION.
01:39:13   IT IS NOT THE BEST VIDEO AND IT WILL ONLY WORK IF
01:39:15   YOU'RE ALL VERY QUIET.
01:39:17   I'M JUST GOING TO DO A QUICK DEMONSTRATION HERE.
01:39:21   HOW I CAN TURN MY AIR CONDITIONER ON FROM MY
01:39:25   BROWSER, SO I'M GOING TO GO OVER TO THIS PAGE.
01:39:28   AND JUST REFRESH.
01:39:33   OKAY, SO MY AIR CONDITIONER IS OFF, IF YOU CAN
01:39:37   SEE THAT.
01:39:38   IT IS IN FACT OFF.
01:39:39   YOU CAN'T HEAR ANYTHING.
01:39:43   AND YOU WON'T SEE ANY LITTLE RED LIGHT ON THE
01:39:47   POWER SWITCH.
01:39:48   I'M DOING TO TELL IT "TURN ON," SO I CLICK THAT
01:39:51   RADIO BUTTON, HIT "SUBMIT" HERE.
01:39:54   WAITING, WAITING.
01:39:55   GIVE IT A SECOND.
01:39:57   [ SOUNDS OF AIR CONDITIONER TURNING ON]
01:40:00   >> DID YOU HEAR THAT?
01:40:01   YOU CAN SEE THE RED LIGHT.
01:40:02   [ Laughter ]
01:40:04   >> AND WE TELL IT TO TURN OFF.
01:40:15   [ AIR CONDITIONER TURNS OFF ]
01:40:17   >> ONE TAKE.
01:40:19   >> ONE TAKE.
01:40:19   >> THERE YOU GO.
01:40:20   [ Applause ]
01:40:22   THANK YOU SO MUCH, EVERYBODY.
01:40:26   AND I'VE JUST WANTED TO SAY A QUICK THANKS TO THE
01:40:29   RECURSE CENTER/HACKER SCHOOL BECAUSE I COULD NOT
01:40:33   HAVE DONE THIS PROJECT WITHOUT EVERYONE THERE.
01:40:35   SO, THANKS.
01:40:36   [ Applause ]
01:40:50   >> ALL RIGHT.
01:40:51   THANK YOU, MIRIAM.
01:40:52   IF ANYBODY HAS ANY QUESTIONS, THEN THEY CAN COME
01:40:55   UP TO THIS MICROPHONE AND ASK THEM.
01:40:57   THANK YOU.
01:41:02   [ AUDIENCE:  HI, THANKS FOR THE TALK.
01:41:04   I'M CURIOUS IF THIS PROJECT HAS MADE YOU MORE
01:41:08   EXCITED OR LESS EXCITED ABOUT SORT OF THE
01:41:10   PROMISED FUTURE OF THE INTERNET OF THINGS.
01:41:13   >> HUM, THAT'S A GOOD QUESTION.
01:41:15   SO, IT MADE ME REALLY EXCITED ABOUT DOING MORE
01:41:20   INTERNET OF THINGS, PROJECTS MYSELF, BECAUSE
01:41:23   THEY'RE REALLY FUN BUT I THINK IT KIND OF
01:41:26   DE-MYSTIFIED TO SOME EXTENT LIKE HOW COOL THESE
01:41:30   DEVICES ARE BECAUSE IT'S REALLY NOT VERY HARD TO
01:41:33   PUT TOGETHER YOURSELF.
01:41:34   SO, YEAH, I -- AND I ALSO THINK IT'S GOING TO BE
01:41:39   A LONG TIME BEFORE MY SMART AIR CONDITIONER CAN
01:41:42   DO MY LAUNDRY, SO, YOU KNOW...
01:41:47   >> AUDIENCE:  THANKS FOR THE TALK.
01:41:48   I WAS -- I ACTUALLY DID SMART THERMOSTATS FOR A
01:41:51   WHILE BEFORE MY COMPANY FOLDED AND I WAS KIND OF
01:41:54   CURIOUS, HAVE YOU LOOKED INTO GETTING INTO MAYBE
01:41:57   HUMIDITY SENSORS AND SEEING IF YOU COULD GET MORE
01:42:01   THERMAL COMFORT LEVELS SO, IF YOU GOT REALLY HIGH
01:42:04   HUMIDITY, YOU DON'T WANT IT TO GET REALLY COLD
01:42:07   EVEN IF IT'S SET TO THE SAME TEMPERATURE AS
01:42:09   NORMAL.
01:42:10   >> YEAH, THAT'S A REALLY GREAT IDEA.
01:42:12   I HAVEN'T TRIED TO DO THAT BUT I KNOW THERE ARE
01:42:14   ALL SORTS OF LIKE FUN SENSORS THAT YOU CAN GET
01:42:16   FOR THE RASPBERRY PI SO I'M BUILDING UP A
01:42:19   COLLECTION OF NEW TOYS.
01:42:21   >> AUDIENCE: COOL.
01:42:21   I LOOK FORWARD TO CHECKING THAT ONE OUT.
01:42:25   >> AUDIENCE: HI, MIRIAM.
01:42:26   DID YOU DECIDE TO CHECK IN ON THE SERVER LIKE
01:42:31   ONCE EVERY SECOND WITH ANY, LIKE, DATA OR DID YOU
01:42:34   JUST DECIDE THAT ARBITRARILY?
01:42:35   >> SORRY, I DIDN'T HEAR THE VERY END OF THE
01:42:37   QUESTION.
01:42:37   >> AUDIENCE:  OR DID YOU JUST DECIDE HOW OFTEN TO
01:42:40   CHECK THE SERVER ARBITRARILY?
01:42:42   >> YES, I JUST DECIDED ARBITRARILY.
01:42:44   SINCE I DESIGNED THIS JUST WITH MYSELF AND MY
01:42:48   RASPBERRY PI IN MIND, I WASN'T THINKING VERY MUCH
01:42:52   LIKE BLOWING UP THE SERVER WITH REQUESTS BECAUSE
01:42:54   IT JUST WAS ONLY ME USING IT SO I FIGURED ONCE A
01:42:58   SECOND WOULD DEFINITELY BE FREQUENT ENOUGH AND
01:43:00   WOULD BE FINE, SO IT WAS PRETTY ARBITRARY, YEAH.
01:43:04   >> AUDIENCE:  THANKS.
01:43:06   >> AUDIENCE:  DO YOU THINK YOU COULD OPEN UP THE
01:43:10   A.C. AND FIGURE OUT THINGS LIKE FAN SPEED OR -- I
01:43:13   MEAN, MORE THAN JUST ON AND OFF?
01:43:15   DID YOU LEARN ENOUGH TO DO MORE THAN THAT?
01:43:19   >> AT THE TIME THAT I WAS DOING THIS PROJECT, I
01:43:23   DEFINITELY WOULD HAVE NEEDED SOME HELP TO DO THAT
01:43:25   AND I PROBABLY STILL WOULD.
01:43:26   I THINK IT'S POSSIBLE BUT I SORT OF WEIGHED THE
01:43:29   CHANCES THAT I WOULD BREAK SOMETHING OR SET MY
01:43:31   ROOM ON FIRE AGAINST LIKE HOW COOL THAT WOULD BE,
01:43:34   SO -- BUT, YOU KNOW, MAYBE ONE DAY.
01:43:39   >> AUDIENCE:  HEY, THANKS FOR THE TALK.
01:43:41   SO I THINK THE ONLY THING WORSE THAN WAKING UP
01:43:45   WITHOUT MY A.C. ON WOULD BE HAVING TO GET ON MY
01:43:48   COMPUTER AND REBOOT A SERVER BECAUSE MY
01:43:51   A.C. ISN'T ON.
01:43:53   DID YOU THINK ABOUT ANY WAYS THAT, LIKE -- I
01:43:55   TOTALLY UNDERSTAND THE IDEA TO TURN THE A.C. OFF
01:43:59   IF IT'S NOT RESPONDING BECAUSE YOU DON'T WANT TO
01:44:01   JUST LEAVE THE THING ON.
01:44:02   ARE THERE ANY OTHER WAYS YOU COULD, LIKE, GET
01:44:04   AROUND THAT AND, I DON'T KNOW, MAKE IT FAIL-PROOF
01:44:08   BUT ALSO HIT A TARGETED TEMPERATURE OR SOMETHING
01:44:12   LIKE THAT?
01:44:13   >> YEAH, I MEAN, SO I MIGHT JUST AS A VERY SIMPLE
01:44:17   SOLUTION TO THAT KIND OF -- IF IT'S IN THE, LIKE,
01:44:22   ON-ON STATE, THEN TURN IT OFF BECAUSE IT WOULD
01:44:28   NEVER TURN ITSELF OFF BUT IF IT'S IN TEMPERATURE
01:44:31   CONTROL STATE, IT COULD PROBABLY SURVIVE ON ITS
01:44:33   OWN FOR A WHILE UNTIL I GET HOME BUT IN ORDER TO
01:44:35   DO THAT, I WOULD HAVE TO ALSO MAKE SURE TO STORE,
01:44:38   LIKE, WHAT THE RASPBERRY PI THINKS THE STATE IS
01:44:44   AND I KIND OF LEFT THAT LOGIC ON THE SERVER SO IT
01:44:48   WOULD DEFINITELY BE SOMETHING TO THINK ABOUT,
01:44:50   YEAH.
01:44:52   >> A LITTLE BIT OF SHAMELESS ADVERTISING, I WANT
01:44:55   TO SAY IF ANYBODY IS INTERESTED IN ENVIRONMENTAL
01:44:58   MONITORING, I HAVE THIS VERY LARGE AND EXTENSIVE
01:45:01   OPEN SOURCE PROJECT WRITTEN IN PEARL THAT NEEDS
01:45:03   TO BE IMPORTED TO PYTHON SO IF ANYBODY IS
01:45:05   INTERESTED, I WOULD BE DELIGHTED TO GET SOME HELP
01:45:08   AND IT WOULD RELATE VERY NICELY TO WHAT YOU'RE
01:45:10   DOING.
01:45:10   GREAT TALK, THANK YOU.
01:45:11   >> ALL RIGHT, THANKS.
01:45:13   >> AUDIENCE:  HEY, CAN YOU DO THE SAME THING WITH
01:45:15   A SPACE HEATER OR IS IT TO ELECTRICALLY TOO
01:45:17   DANGEROUS OR SOMETHING?
01:45:19   >> SPACE HEATERS ARE PRETTY DANGEROUS.
01:45:23   I WOULD NOT DO IT.
01:45:24   BUT THAT'S ME.
01:45:25   IF YOU LIKE TO LIVE ON THE EDGE, I TOLD YOU NOT
01:45:29   TO.
01:45:29   [ Laughter ]
01:45:30   ANYBODY ELSE?
01:45:34   ALL RIGHT, THANKS SO MUCH, YOU GUYS.
01:45:37   [ Applause ]



















